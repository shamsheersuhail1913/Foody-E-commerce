<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Confirmed - Foody</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçΩÔ∏è</text></svg>" type="image/svg+xml">
    <script src="history-manager.js"></script>
    <style>
        * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .confirmation-container { max-width: 600px; margin: 0 auto; padding: 100px 20px 50px; text-align: center; }
        .success-icon { font-size: 5rem; color: #27ae60; margin-bottom: 30px; }
        .confirmation-title { font-size: 2.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 15px; }
        .confirmation-message { font-size: 1.2rem; color: #7f8c8d; margin-bottom: 30px; }
        .order-details { background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); padding: 30px; margin-bottom: 30px; }
        .order-id { font-size: 1.1rem; color: #2c3e50; margin-bottom: 15px; }
        .order-total { font-size: 1.5rem; font-weight: 700; color: #e74c3c; margin-bottom: 20px; }
        .delivery-info { font-size: 1rem; color: #7f8c8d; }
        .delivery-details { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .detail-row { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .detail-label { font-weight: 600; color: #2c3e50; }
        .detail-value { color: #7f8c8d; }
        .payment-method { display: inline-flex; align-items: center; gap: 8px; }
        .action-buttons { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .btn { padding: 15px 30px; border-radius: 25px; font-size: 1.1rem; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; transition: all 0.3s; }
        .btn-primary { background: #27ae60; color: white; border: none; }
        .btn-primary:hover { background: #219a52; }
        .btn-secondary { background: #3498db; color: white; border: none; }
        .btn-secondary:hover { background: #2980b9; }
    </style>
</head>
<body>
    <div class="confirmation-container">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>

        <h1 class="confirmation-title">Booking Confirmed!</h1>
        <p class="confirmation-message">Thank you for your reservation. We're excited to welcome you!</p>

        <div class="order-details">
            <div class="order-id">Booking ID: <span id="bookingId"></span></div>
            <div class="order-total">Table for <span id="guestCount"></span> guests</div>

            <div class="delivery-details">
                <div class="detail-row">
                    <span class="detail-label">Name:</span>
                    <span class="detail-value" id="customerName"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Phone:</span>
                    <span class="detail-value" id="customerPhone"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Date:</span>
                    <span class="detail-value" id="bookingDate"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Time:</span>
                    <span class="detail-value" id="bookingTime"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Restaurant:</span>
                    <span class="detail-value" id="restaurant"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Table Number:</span>
                    <span class="detail-value" id="tableNumber"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Special Requests:</span>
                    <span class="detail-value" id="specialRequests"></span>
                </div>
            </div>

            <div class="delivery-info">
                Please arrive 10 minutes before your reservation time<br>
                You will receive SMS reminders about your booking
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn btn-primary" onclick="window.location.href='index.html'">
                <i class="fas fa-home"></i> Back to Home
            </button>
            <button class="btn btn-secondary" onclick="window.location.href='table-history.html'">
                <i class="fas fa-history"></i> View Booking History
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', e => e.preventDefault());
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 'c' || e.key === 'x' || e.key === 'v' || e.key === 'a' || e.key === 's' || e.key === 'u')) {
                e.preventDefault();
            }
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
            }
        });

        // Get booking details from sessionStorage
        const bookingData = JSON.parse(sessionStorage.getItem('lastBooking') || '{}');
        
        if (bookingData.bookingId && bookingData.bookingDetails) {
            // Display booking information
            document.getElementById('bookingId').textContent = bookingData.bookingId;
            document.getElementById('guestCount').textContent = bookingData.bookingDetails.guests;

            // Display booking details
            document.getElementById('customerName').textContent = bookingData.bookingDetails.name;
            document.getElementById('customerPhone').textContent = bookingData.bookingDetails.phone;
            document.getElementById('bookingDate').textContent = bookingData.bookingDetails.date;
            document.getElementById('bookingTime').textContent = formatTime(bookingData.bookingDetails.time);
            document.getElementById('restaurant').textContent = bookingData.bookingDetails.restaurant;
            document.getElementById('tableNumber').textContent = bookingData.bookingDetails.tableNumber;
            document.getElementById('specialRequests').textContent = bookingData.bookingDetails.specialRequests || 'None';

            // Add to booking history
            if (typeof historyManager !== 'undefined') {
                historyManager.addBooking({
                    bookingDetails: bookingData.bookingDetails,
                    bookingId: bookingData.bookingId,
                    bookingTime: bookingData.bookingTime
                });
            }
        } else {
            // Show demo data if no booking data (for testing when opened directly)
            document.getElementById('bookingId').textContent = 'BK123456';
            document.getElementById('guestCount').textContent = '2';

            document.getElementById('customerName').textContent = 'Demo User';
            document.getElementById('customerPhone').textContent = '+91 9876543210';
            document.getElementById('bookingDate').textContent = new Date().toLocaleDateString();
            document.getElementById('bookingTime').textContent = '7:00 PM';
            document.getElementById('restaurant').textContent = 'BlueMoon Restaurant';
            document.getElementById('tableNumber').textContent = 'T04';
            document.getElementById('specialRequests').textContent = 'Demo booking for testing';
        }
        
        // Clear the session data after displaying
        sessionStorage.removeItem('lastBooking');

        function formatTime(time) {
            const [hours, minutes] = time.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const displayHour = hour > 12 ? hour - 12 : hour;
            return `${displayHour}:${minutes} ${ampm}`;
        }
    </script>
</body>
</html>