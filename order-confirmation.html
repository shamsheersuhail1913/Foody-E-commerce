<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmed - Foody</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçΩÔ∏è</text></svg>" type="image/svg+xml">
    <script src="history-manager.js"></script>
    <style>
        * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .confirmation-container { max-width: 600px; margin: 0 auto; padding: 100px 20px 50px; text-align: center; }
        .success-icon { font-size: 5rem; color: #27ae60; margin-bottom: 30px; }
        .confirmation-title { font-size: 2.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 15px; }
        .confirmation-message { font-size: 1.2rem; color: #7f8c8d; margin-bottom: 30px; }
        .order-details { background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); padding: 30px; margin-bottom: 30px; }
        .order-id { font-size: 1.1rem; color: #2c3e50; margin-bottom: 15px; }
        .order-total { font-size: 1.5rem; font-weight: 700; color: #e74c3c; margin-bottom: 20px; }
        .delivery-info { font-size: 1rem; color: #7f8c8d; }
        .delivery-details { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .detail-row { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .detail-label { font-weight: 600; color: #2c3e50; }
        .detail-value { color: #7f8c8d; }
        .payment-method { display: inline-flex; align-items: center; gap: 8px; }
        .action-buttons { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .btn { padding: 15px 30px; border-radius: 25px; font-size: 1.1rem; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; transition: all 0.3s; }
        .btn-primary { background: #27ae60; color: white; border: none; }
        .btn-primary:hover { background: #219a52; }
        .btn-secondary { background: #3498db; color: white; border: none; }
        .btn-secondary:hover { background: #2980b9; }
    </style>
</head>
<body>
    <div class="confirmation-container">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        
        <h1 class="confirmation-title">Order Confirmed!</h1>
        <p class="confirmation-message">Thank you for your order. We're preparing your delicious meal!</p>
        
        <div class="order-details">
            <div class="order-id">Order ID: <span id="orderId"></span></div>
            <div class="order-total">Total: ‚Çπ<span id="orderTotal"></span></div>
            
            <div class="delivery-details">
                <div class="detail-row">
                    <span class="detail-label">Delivery To:</span>
                    <span class="detail-value" id="customerName"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Phone:</span>
                    <span class="detail-value" id="customerPhone"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Address:</span>
                    <span class="detail-value" id="deliveryAddress"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Payment:</span>
                    <span class="detail-value payment-method" id="paymentMethod"></span>
                </div>
            </div>
            
            <div class="delivery-info">
                Estimated delivery time: 30-45 minutes<br>
                You will receive SMS updates about your order status
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="window.location.href='index.html'">
                <i class="fas fa-home"></i> Back to Home
            </button>
            <button class="btn btn-secondary" onclick="window.location.href='history.html'">
                <i class="fas fa-history"></i> View Order History
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', e => e.preventDefault());
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 'c' || e.key === 'x' || e.key === 'v' || e.key === 'a' || e.key === 's' || e.key === 'u')) {
                e.preventDefault();
            }
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
            }
        });

        // Get order details from sessionStorage
        const orderData = JSON.parse(sessionStorage.getItem('lastOrder') || '{}');
        
        if (orderData.orderId && orderData.deliveryDetails) {
            // Display order information
            document.getElementById('orderId').textContent = orderData.orderId;
            document.getElementById('orderTotal').textContent = orderData.total;
            
            // Display delivery details
            document.getElementById('customerName').textContent = orderData.deliveryDetails.fullName;
            document.getElementById('customerPhone').textContent = orderData.deliveryDetails.phone;
            document.getElementById('deliveryAddress').textContent = orderData.deliveryDetails.address;
            
            // Display payment method with icon
            const paymentIcons = {
                'cod': 'üíµ Cash on Delivery',
                'card': 'üí≥ Credit/Debit Card',
                'upi': 'üì± UPI Payment'
            };
            document.getElementById('paymentMethod').textContent = paymentIcons[orderData.deliveryDetails.paymentMethod] || orderData.deliveryDetails.paymentMethod;
            
            // Add to order history
            if (typeof historyManager !== 'undefined') {
                historyManager.addOrder({
                    items: orderData.items,
                    total: orderData.total,
                    deliveryDetails: orderData.deliveryDetails,
                    orderId: orderData.orderId,
                    orderTime: orderData.orderTime
                });
            }
        } else {
            // Redirect back to home if no valid order data
            window.location.href = 'index.html';
        }
        
        // Clear the session data after displaying
        sessionStorage.removeItem('lastOrder');
    </script>
</body>
</html>